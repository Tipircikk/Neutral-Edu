
{
  "rules": {
    "users": {
      "$uid": {
        ".read": "auth != null && (auth.uid == $uid || root.child('users').child(auth.uid).child('isAdmin').val() == true)",
        ".write": "auth != null && (auth.uid == $uid || root.child('users').child(auth.uid).child('isAdmin').val() == true)"
      },
      ".read": "auth != null && root.child('users').child(auth.uid).child('isAdmin').val() == true" 
    },
    "supportTickets": {
      "$ticketId": {
        ".read": "auth != null && (data.child('userId').val() == auth.uid || root.child('users').child(auth.uid).child('isAdmin').val() == true)",
        ".write": "auth != null && ( (data.exists() && data.child('userId').val() == auth.uid) || (!data.exists() && newData.child('userId').val() == auth.uid) || root.child('users').child(auth.uid).child('isAdmin').val() == true)",
        "messages": {
          "$messageId": {
            ".read": "auth != null && (root.child('supportTickets').child($ticketId).child('userId').val() == auth.uid || root.child('users').child(auth.uid).child('isAdmin').val() == true)",
            ".write": "auth != null && ( (newData.child('senderId').val() == auth.uid && newData.child('senderType').val() == 'user' && root.child('supportTickets').child($ticketId).child('userId').val() == auth.uid) || (newData.child('senderId').val() == auth.uid && newData.child('senderType').val() == 'admin' && root.child('users').child(auth.uid).child('isAdmin').val() == true) )"
          }
        }
      },
      ".read": "auth != null && root.child('users').child(auth.uid).child('isAdmin').val() == true" 
    },
    "pricingConfig": {
      "currentPrices": {
        ".read": true,
        ".write": "auth != null && root.child('users').child(auth.uid).child('isAdmin').val() == true"
      }
    },
    "appConfig": {
      "examDates": {
        ".read": true,
        ".write": "auth != null && root.child('users').child(auth.uid).child('isAdmin').val() == true"
      }
    },
    "coupons": {
      "$couponId": {
        ".read": "auth != null && root.child('users').child(auth.uid).child('isAdmin').val() == true",
        ".write": "auth != null && root.child('users').child(auth.uid).child('isAdmin').val() == true"
      },
      ".read": "auth != null && root.child('users').child(auth.uid).child('isAdmin').val() == true" 
    }
  }
}
